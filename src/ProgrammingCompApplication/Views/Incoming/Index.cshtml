@{
    ViewData["Title"] = "Incoming";
}

<div id="main-content">
    <h2>
        <span>Incoming questions</span>
        <small> <span id="status" class="label label-info">Connecting..</span></small>
        <small> <span class="label label-info" data-bind="text:questions().length">0</span></small>
    </h2>

    <div>
        <table id="questions" class="table table-striped table-bordered">
            <thead>
            <tr>
                <th>#</th>
                <th>Question/Answer</th>
                <th>Added</th>
                <th></th>
            </tr>
            </thead>
            <tbody data-bind="foreach:questions">
            <tr data-bind="attr:{id: 'q' + id}, css: { 'success': answer, 'danger': !answer }">
                <td data-bind="css: { 'success': answer, 'danger': !answer }">
                    <div data-bind="text:id"></div>
                </td>
                <td>
                    <div>
                        <span data-bind="text:questionBase64"></span><br/>
                        <b data-bind="text:question"></b><br/>
                        <span data-bind="text:answer"></span>
                    </div>
                </td>
                <td>
                    <div>
                        <span data-bind="text:moment(added).format('LTS')"></span><br/>
                        <span data-bind="text:ip"></span>
                    </div>
                </td>
                <td>
                    <div>
                        <button type="button" class="btn btn-primary rerun">Rerun</button>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

@section scripts{
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.1/moment.min.js"></script>
    <script src="../signalr/hubs"></script>
    <script src="~/js/Incoming/index.js"></script>
}