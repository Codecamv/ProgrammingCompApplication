function onMyArrayChange(){myArraySubscription.dispose(),myArraySubscription=null,viewModel.questions.sort(function(e,t){return e.added<t.added?1:-1}),myArraySubscription=viewModel.questions.subscribe(onMyArrayChange)}var questionsBaseAddress="/api/questions/",viewModel={questions:ko.observableArray(),addQuestion:function(e){this.questions.push(e),setTimeout(function(){$("table#questions tbody tr#q"+e.id).addClass("transparent")},100)},updateQuestion:function(e,t){var s=ko.utils.arrayFirst(this.questions(),function(t){return parseInt(t.id)===parseInt(e)});this.questions.remove(s),this.questions.push(t),$("table#questions tbody tr#q"+e).addClass("transparent")}},myArraySubscription=viewModel.questions.subscribe(onMyArrayChange);$.connection.hub.logging=!0;var questionsHub=$.connection.questionHub;$.connection.hub.start().done(function(){$.getJSON(questionsBaseAddress,function(e){viewModel.questions(e),$("table#questions tbody tr").removeClass("success").removeClass("danger")}),$("#status").text("Live").removeClass("label-info").addClass("label-success")}),questionsHub.client.newQuestion=function(e){viewModel.addQuestion(e)},ko.applyBindings(viewModel),$(document).ready(function(){$("#questions").on("click",".rerun",function(){var e=$(this),t="Updating...";if(e.text()!==t){var s=e.clone().text();e.text(t);var n=e.closest("tr").attr("id").replace("q","");$.getJSON(questionsBaseAddress+"rerun/"+n,function(t){viewModel.updateQuestion(n,t),e.text(s)})}})}),ko.extenders.date=function(e,t){return ko.computed({read:function(){var s=e();return"string"==typeof s&&(s=new Date(s)),t="string"==typeof t?t:void 0,s=Globalize.format(s,t)},write:e})};